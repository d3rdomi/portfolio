---
import type { CollectionEntry } from 'astro:content';
import BaseHead from '../components/BaseHead.astro';
import '../styles/global-style.css';
import '../styles/design-undersite-style.css';
import MyFooter from '../components/MyFooter.astro';
import Carousel from '../components/Carousel.jsx';
import { slide } from 'astro:transitions';

type Props = CollectionEntry<'design'>['data'];

const { title, description, pubDate, updatedDate, heroImage, text, images, ImageCarousel } = Astro.props;

// DEBUG: Schauen wir was ankommt
console.log('=== DEBUG ===');
console.log('ImageCarousel:', ImageCarousel);
console.log('Alle Props:', Astro.props);
console.log('=============');

const slides = ImageCarousel?.map((item) => ({
  title: item.title,
  image: item.image,
  text: item.text,
  alt: item.altText || item.title, // Fallback auf title falls kein altText
})) || [];

/* const slides = [
  {
    title: title,         // Titel aus der MDOC-Datei
    image: '/assets/design/gute-fahrt/heroImage.jpg',     // Hero-Image aus MDOC
    text: 'text1',           // optionaler Text
    alt: 'alt-Text 1' // kannst auch aus Astro.props holen, falls vorhanden
  },
  {
    title: 'Slide 2',         // Titel aus der MDOC-Datei
    image: '/assets/design/gute-fahrt/heroImage.jpg',      // Hero-Image aus MDOC
    text: 'Text2',           // optionaler Text
    alt: 'alt-Text 2' // kannst auch aus Astro.props holen, falls vorhanden
  },
]; */

---

<html lang="de">
  <head>
    <BaseHead title={title} description={description} />
  </head>

  <body>
    <main>
      <article>
        <div class="prose">
          <div class="title">
            <h1>{title}</h1>
            {description && <p class="description">{description}</p>}
            {pubDate && <time datetime={pubDate.toString()}>Published: {new Date(pubDate).toLocaleDateString()}</time>}
            {updatedDate && <time datetime={updatedDate.toString()}>Updated: {new Date(updatedDate).toLocaleDateString()}</time>}
          </div>

          {text && (
            <div class="text-content">
              <p>{text}</p>
            </div>
          )}

          {slides.length > 0 && <Carousel slides={slides} client:load />}

          <slot />
        </div>
      </article>
    </main>
    <MyFooter />
  </body>
</html>
